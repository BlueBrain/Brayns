include:
  - project: hpc/gitlab-pipelines
    file: spack-build-components.gitlab-ci.yml
    

variables:
   bb5_account: proj3
   DATADIR: /tmp
   SALLOC_ACCOUNT: proj3
   SBATCH_ACCOUNT: proj3
   SLURM_ACCOUNT: proj3
   SLURM_CPUS_PER_TASK: 72
   SPACK_PACKAGE: brayns
   SPACK_PACKAGE_NAME: brayns
   SPACK_PACKAGE_COMPILER: gcc
   SPACK_PACKAGE_REF: ''
   SPACK_PACKAGE_SPEC: +brion ^ospray@1.8.5%intel
    

spack_setup:
  extends: .spack_setup_ccache


brayns-spack-build:
  extends: .spack_build
  stage: test
   

brayns-spack-test:
  extends: .ctest
  stage: test
  needs: ["brayns-spack-build"]

  

